---
# Template. See: https://www.home-assistant.io/integrations/template/
platform: template
sensors:
  dsmr_reading_electricity_currently_delivered_watts:
    friendly_name: "Current power usage"
    unit_of_measurement: 'W'
    icon_template: mdi:flash
    value_template: >
      {{ '{:,.0f}'.format(states('sensor.dsmr_reading_electricity_currently_delivered') | float * 1000).replace(',', '.') }}

  dsmr_consumption_gas_currently_delivered_liters:
    friendly_name: "Current gas usage"
    unit_of_measurement: 'liters'
    icon_template: mdi:fire
    value_template: >
      {{ '{:,.0f}'.format(states('sensor.dsmr_consumption_gas_currently_delivered') | float * 1000).replace(',', '.') }}

  dsmr_day_consumption_electricity_merged_watts:
    friendly_name: "Power usage total"
    unit_of_measurement: 'kWh'
    icon_template: mdi:counter
    value_template: >
      {{ '{:,.2f}'.format(states('sensor.dsmr_day_consumption_electricity_merged') | float).replace(',', '.') }}

  dsmr_day_consumption_gas_liters:
    friendly_name: "Gas usage total"
    unit_of_measurement: 'liters'
    icon_template: mdi:counter
    value_template: >
      {{ '{:,.0f}'.format(states('sensor.dsmr_day_consumption_gas') | float * 1000).replace(',', '.') }}

  dsmr_day_consumption_total_fixed_cost:
    friendly_name: "Total cost"
    unit_of_measurement: 'â‚¬'
    icon_template: mdi:currency-eur
    value_template: >
      {{ '{:.2f}'.format(states('sensor.dsmr_day_consumption_total_cost') | float - 
          states('sensor.dsmr_day_consumption_gas_cost') | float - 
          states('sensor.dsmr_day_consumption_electricity_cost_merged') | float) }}
